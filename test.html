<!DOCTYPE html>
<html lang="en" x-data="app()" x-init="init()" :class="{ 'dark': darkMode }" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loch & Legend Tours</title>

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />

  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.0/dist/cdn.min.js" defer></script>

  <!-- SwiperJS CSS & JS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

  <!-- Leaflet.js CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <style>
    .zoom-hover:hover {
      transform: scale(1.05);
      transition: transform 0.3s ease;
    }
    #map {
      height: 500px;
      width: 100%;
      border-radius: 1rem;
      overflow: hidden;
    }
    /* Popup scroll area */
    .popup-content {
      max-height: 30vh;
      overflow-y: auto;
      padding-right: 0.5rem;
      line-height: 1.6;
      font-size: 1rem;
      color: #1f2937; /* Tailwind gray-800 */
    }
    .dark .popup-content {
      color: #d1d5db; /* Tailwind gray-300 */
    }
    /* Read more/less inline styling */
    .read-toggle {
      color: #2563eb; /* Tailwind blue-600 */
      cursor: pointer;
      text-decoration: underline;
      font-weight: 600;
      margin-left: 0.25rem;
    }
    .dark .read-toggle {
      color: #60a5fa; /* Tailwind blue-400 */
    }
    /* Scrollbar styling for popup content */
    .popup-content::-webkit-scrollbar {
      width: 6px;
    }
    .popup-content::-webkit-scrollbar-thumb {
      background-color: #a0aec0; /* Tailwind gray-400 */
      border-radius: 3px;
    }
    /* Dark mode scrollbar */
    .dark .popup-content::-webkit-scrollbar-thumb {
      background-color: #4b5563; /* Tailwind gray-600 */
    }
  </style>
</head>
<body class="bg-gradient-to-br from-green-100 to-blue-50 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-100 relative">

  <!-- Navbar -->
  <header class="fixed w-full bg-white dark:bg-gray-900 shadow z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold">Loch & Legend</h1>
      <nav class="space-x-4 hidden md:block">
        <a href="#tours" class="hover:underline">Tours</a>
        <a href="#map-section" class="hover:underline">Map</a>
        <a href="#footer" class="hover:underline">Contact</a>
        <button @click="darkMode = !darkMode" class="ml-4 px-3 py-1 rounded bg-gray-200 dark:bg-gray-700" aria-label="Toggle Dark Mode">ðŸŒ™</button>
      </nav>
      <button class="md:hidden" aria-label="Open menu">â˜°</button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="relative h-screen bg-cover bg-center" style="background-image: url('data:image/jpeg;base64,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');" role="img" aria-label="Scotland landscape with hills and sky">
    <div class="absolute inset-0 bg-black bg-opacity-40 flex flex-col items-center justify-center text-center text-white px-4">
      <h1 class="text-6xl font-extrabold tracking-wide mb-4 drop-shadow-lg">Loch & Legend Tours</h1>
      <p class="text-xl max-w-xl">Explore Edingburgh, an old legend city with fantastic architecture and exciting attractions. </p>
      <a href="#tours" class="mt-8 bg-yellow-400 text-gray-900 px-6 py-3 rounded-full shadow-md hover:bg-yellow-500 transition focus:outline-none focus:ring-4 focus:ring-yellow-300">View Our Tours</a>
    </div>
  </section>

  <!-- Tours Section -->
  <section id="tours" class="py-20 px-6 max-w-7xl mx-auto">
    <h2 class="text-4xl font-bold text-center mb-12">Our Tours</h2>
    <div class="grid md:grid-cols-3 gap-10">
      <template x-for="tour in tours" :key="tour.id">
        <article tabindex="0" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition cursor-pointer transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300" @click="openTour(tour)" @keydown.enter="openTour(tour)" @keydown.space.prevent="openTour(tour)" role="button" :aria-label="'Open details for ' + tour.name">
          <div class="relative">
            <img :src="tour.images[0]" :alt="'Image of ' + tour.name" class="w-full h-48 object-cover zoom-hover" />
            <span x-show="tour.badge" class="absolute top-2 left-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-full" x-text="tour.badge" aria-live="polite"></span>
          </div>
          <div class="p-5">
            <h3 class="text-2xl font-bold mb-1" x-text="tour.name"></h3>
            <p class="text-gray-600 dark:text-gray-300" x-text="tour.short"></p>
          </div>
        </article>
      </template>
    </div>
  </section>

  <!-- Map Section -->
  <section id="map-section" class="py-20 px-6 max-w-7xl mx-auto">
    <h2 class="text-4xl font-bold text-center mb-12">Tour Map</h2>
    <div id="map" role="region" aria-label="Map showing tour locations"></div>
  </section>

  <!-- Tour Popup Modal with Swiper Carousel -->
  <div x-show="selectedTour" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 px-4" x-transition
       role="dialog" aria-modal="true" :aria-labelledby="'tour-title-'+selectedTour?.id" @keydown.escape.window="selectedTour = null">
    <div class="bg-white dark:bg-gray-900 p-6 rounded-xl max-w-3xl w-full shadow-xl relative max-h-[90vh] overflow-hidden focus:outline-none" tabindex="0">
      <button class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl" @click="selectedTour = null" aria-label="Close tour details">âœ–</button>

      <!-- Carousel (Diashow) -->
      <div id="tourCarousel" class="carousel slide mb-4 rounded-xl overflow-hidden" data-bs-ride="carousel" data-bs-interval="3000">
        <div class="carousel-inner">
          <template x-for="(img, index) in selectedTour?.images" :key="img">
            <div :class="index === 0 ? 'carousel-item active' : 'carousel-item'">
              <img :src="img" :alt="'Image for ' + selectedTour?.name" class="d-block w-full h-72 md:h-80 object-cover" />
            </div>
          </template>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#tourCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#tourCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <!-- Scrollable content with Read More -->
      <div class="popup-content" x-data="{ expanded: false }" aria-live="polite" aria-atomic="true">
        <h2 class="text-3xl font-bold mb-2" :id="'tour-title-'+selectedTour?.id" x-text="selectedTour?.name"></h2>
        <p class="mb-4" x-html="expanded ? selectedTour?.details.replace(/\n/g, '<br>') : (selectedTour?.details.split(' ').slice(0, 25).join(' ') + '...')">
        </p>
        <button type="button" class="read-toggle" @click="expanded = !expanded" x-text="expanded ? 'Read less' : 'Read more'"></button>
      </div>

      <div class="text-center mt-4">
        <button class="bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700 transition focus:outline-none focus:ring-4 focus:ring-green-400" @click="selectedTour = null" aria-label="Close tour modal">Close</button>
      </div>
    </div>
  </div>

  <!-- Scroll to Top Button -->
  <button @click="window.scrollTo({ top: 0, behavior: 'smooth' })" class="fixed bottom-6 right-6 bg-yellow-400 hover:bg-yellow-500 text-white text-lg p-3 rounded-full shadow-lg z-50 focus:outline-none focus:ring-4 focus:ring-yellow-300" aria-label="Scroll to top">â†‘</button>

  <!-- Footer -->
  <footer id="footer" class="text-center py-10 bg-white dark:bg-gray-900 border-t mt-16">
    <p class="text-gray-500 dark:text-gray-400">&copy; 2025 Warning: This is not a real travel agency. All rights reserved.</p>
    <div class="mt-4 space-x-4">
      <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-400">Contact</a>
      <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-400">Terms</a>
      <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-400">Privacy</a>
    </div>
  </footer>

  <!-- AlpineJS app logic -->
  <script>
    function app() {
      return {
        darkMode: false,
        selectedTour: null,
        tours: [
          {
            id: 1,
            name: 'Edinburgh Castle',
            badge: 'Popular',
            short: 'Half-a-day trip inclusive a guided tour with our professor Lukas M. S.',
            details: 'Discover the history, legends, and stunning views of Edinburgh Castle â€“ Scotlandâ€™s most iconic fortress. Perched dramatically atop Castle Rock, Edinburgh Castle is one of Scotlandâ€™s most iconic landmarks. With over 900 years of history, it has witnessed royal ceremonies, epic sieges, and tales of intrigue. Step inside to explore the Crown Jewels, the Stone of Destiny, and the oldest building in Edinburgh â€“ St. Margaretâ€™s Chapel. From its battlements, enjoy panoramic views of the city below. Whether you\'re a history buff or just love a great view, Edinburgh Castle is a must-see on any Scottish adventure.',
            images: [
              'https://cdn-imgix.headout.com/media/images/112625b3d729ca1f2beb348170dd706a-25265-Edinburgh-sHarryPotterTour-WhiskyTastingExperience-012.jpg?auto=format&w=510.8727272727273&h=401.4&q=90&fit=crop&ar=14%3A11&crop=faces',
              'https://cdn-imgix.headout.com/media/images/4c3d6424c275250b566405350e473f8d-St.Margaret-sChapelattheEdinburghCastle.jpg?auto=format&w=510.8727272727273&h=401.4&q=90&fit=crop&ar=14%3A11&crop=faces',
              'https://cdn-imgix.headout.com/media/images/101a90db3d27c28ed8b90cc26cf92a9f-RoyalCrownJewelsattheEdinburghCastle.jpg?auto=format&w=510.8727272727273&h=401.4&q=90&fit=crop&ar=14%3A11&crop=faces'
            ]
          },
          {
            id: 2,
            name: 'Scottish Whisky Tour',
            badge: 'New',
            short: 'In vinum veritas - in whisky scotish history. Uncover it at our one-day whisky tou with the ex-alcoholics Vuk, Samuel and Lukas.',
            details: 'Experience Scotland through the glass! On the Scottish Whisky Tour, youâ€™ll embark on a flavourful journey through scenic landscapes, charming distilleries, and centuries-old traditions. From the Highlands and Speyside to the smoky islands â€“ each region brings its own unique character to the glass. During guided tastings, youâ€™ll discover how crystal-clear water and golden malted barley are transformed into liquid gold. Along the way, enjoy tales of clans, ghosts, and secret recipes. SlÃ inte mhath â€“ to your health!',
            images: [
              'https://ik.imagekit.io/cvygf2xse/theglenlivet/wp-content/uploads/2021/11/the-glenlivet-15-year-old-valley-of-the-bees-whisky-cocktail-drink-scaled.jpg?tr=q-80,w-1280,h-1280,fo-cover',
              'https://dynamic-media.tacdn.com/media/photo-o/2e/b4/6a/2b/caption.jpg?w=1100&h=800&s=1',
              'https://www.whisky.de/fileadmin/_processed_/9/6/csm_Fasslager_04_8d4ec4b471.jpg'
            ]
          },
          {
            id: 3,
            name: 'The Royal Yacht Britannia',
            badge: '',
            short: 'One-day trip with the ex MEK-Officier Lukas S.',
            details: 'Step aboard The Royal Yacht Britannia â€“ a floating palace steeped in royal history and elegance. Once the official yacht of Queen Elizabeth II, The Royal Yacht Britannia served the British Royal Family for over 40 years, sailing more than a million miles around the world. Now permanently docked in Leith, Edinburgh, visitors can explore its luxurious state rooms, crew quarters, and the royal deck tea room. From grand receptions to private family moments, every deck tells a story. A visit offers a unique glimpse into royal life at sea â€“ refined, personal, and surprisingly intimate.',
            images: [
              'https://www.royalyachtbritannia.co.uk/media/1074/11-copyright-marc-millar.jpg',
              'https://www.myhighlands.de/wp-content/uploads/2017/07/Royal-Yacht-Britannia-12.jpg',
              "https://www.myhighlands.de/wp-content/uploads/2017/07/Royal-Yacht-Britannia-07.jpg"
            ]
          },
          {
            id: 4,
            name: 'Camera Obscura & Illusions',
            badge: 'Family Fun',
            short: 'A day of wonder and perspective.',
            details: 'Step into Edinburghâ€™s most playful attraction! Camera Obscura & World of Illusions takes you through magical rooms filled with visual tricks, mirror mazes, light tunnels, and the famous rooftop camera. Perfect for families, curious minds, and Instagram lovers.',
            images: [
              'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0d/06/66/fb/camera-obscura-and-world.jpg',
              'https://cdn.getyourguide.com/img/location/5e1f8af054d9a.jpeg/99.jpg',
              'https://www.camera-obscura.co.uk/sites/default/files/styles/large/public/2021-11/illusions_0.jpg'
            ]
          },
          {
            id: 5,
            name: 'Outlander Locations Tour',
            badge: 'TV Highlight',
            short: 'Walk in the footsteps of Jamie & Claire.',
            details: 'Visit filming locations from the hit show Outlander. Explore Doune Castle (Castle Leoch), Culross (Cranesmuir), and Midhope Castle (Lallybroch) while uncovering both fiction and history.',
            images: [
              'https://www.visitscotland.com/cms-images/1671492/720x540.jpg',
              'https://www.scotland.org/images/uploads/general/Outlander-Locations-Map-Large.jpg',
              'https://outlanderlocations.com/media/midhope-castle.jpg'
            ]
          },
          {
            id: 6,
            name: 'Isle of Skye Explorer',
            badge: 'Scenic',
            short: 'Rugged beauty and fairy-tale landscapes.',
            details: 'Travel to the mystical Isle of Skye, visiting the Fairy Pools, Old Man of Storr, Quiraing, and Eilean Donan Castle. Includes overnight stays in cozy Highland guesthouses.',
            images: [
              'https://www.isleofskye.com/images/visit/fairy-pools/fairy-pools.jpg',
              'https://www.isleofskye.com/images/visit/storr/old-man-of-storr.jpg',
              'https://www.isleofskye.com/images/visit/quiraing/quiraing.jpg'
            ]
          }
        ],
        init() {
          // Initialize Leaflet map
          const map = L.map('map').setView([56.4907, -4.2026], 6); // Center on Scotland

          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution:
              '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          }).addTo(map);

          // Add markers for tours
          const markers = {
            1: [55.9486, -3.1999], // Edinburgh Castle
            2: [57.3229, -4.4244], // Loch Ness
            3: [57.4595, -3.1256], // Whisky Trail (Speyside region)
          };

          for (const tour of this.tours) {
            const marker = L.marker(markers[tour.id]).addTo(map);
            marker.bindPopup(`<strong>${tour.name}</strong><br>${tour.short}`).on('click', () => {
              this.openTour(tour);
            });
          }
        },
        openTour(tour) {
          this.selectedTour = tour;
          // No Swiper initialization needed for Bootstrap carousel.
        }
      }
    }
  </script>
</body>
<script>
  document.addEventListener('alpine:init', () => {
    Alpine.effect(() => {
      const tour = Alpine.store('alpine:root')?.selectedTour;
      if (tour) {
        setTimeout(() => {
          const el = document.querySelector('#tourCarousel');
          if (el) {
            new bootstrap.Carousel(el, {
              interval: 3000,
              ride: 'carousel'
            });
          }
        }, 100); // delay to ensure DOM is ready
      }
    });
  });
</script>
<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
